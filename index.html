<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Семейная игра Jeopardy</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .player-score {
            text-align: center;
            padding: 10px;
            flex: 1;
            margin: 0 10px;
            border-radius: 4px;
        }
        .player-score.active {
            background-color: #e6f3ff;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        .game-board {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            background-color: #000033;
            padding: 10px;
            border-radius: 8px;
        }
        .category {
            background-color: #000099;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        .question-cell {
            background-color: #000099;
            color: #ffd700;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            font-size: 24px;
            cursor: pointer;
            border: 2px solid #000033;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .question-cell:hover {
            background-color: #0000cc;
        }
        .question-cell.used {
            background-color: #000033;
            cursor: not-allowed;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }
        .modal-content {
            position: relative;
            background-color: #000099;
            color: white;
            margin: 15% auto;
            padding: 20px;
            width: 70%;
            border-radius: 8px;
            text-align: center;
        }
        .close-btn {
            position: absolute;
            right: 10px;
            top: 5px;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        .answer-btn {
            background-color: #ffd700;
            color: #000033;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .answer-btn:hover {
            background-color: #ffed4a;
        }
        .controls {
            margin-top: 20px;
            text-align: center;
        }
        .score-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        .current-player {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            color: #000099;
        }
    </style>
</head>
<body onload="loadSettings()">
    <div class="game-container">
        <div class="header">
            <h1>Семейная игра Jeopardy</h1>
            <button id="settingsBtn">Настройки</button>
        </div>

        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeSettings()">×</span>
                <h2>Настройки игры</h2>
                <label for="numPlayers">Количество игроков:</label>
                <input type="number" id="numPlayers" min="2" max="5" value="4"><br><br>
                <div id="playerNames"></div>
                <label for="numSections">Количество разделов:</label>
                <input type="number" id="numSections" min="6" max="6" value="6" readonly><br><br>
                <div id="categoryInputs"></div>
                <button onclick="saveSettings()">Сохранить</button>
                <button onclick="resetToDefaults()">Сброс</button>
                <button onclick="closeSettings()">Отмена</button>
            </div>
        </div>
        
        <div class="score-board" id="scoreBoard">
            <!-- Scoreboard will be dynamically populated here -->
        </div>

        <div class="current-player" id="currentPlayer">
            <!-- Current player will be displayed here -->
        </div>

        <div class="game-board" id="gameBoard">
            <!-- Заполняется через JavaScript -->
        </div>

        <div id="questionModal" class="modal">
            <div class="modal-content">
                <span class="close-btn">×</span>
                <h2 id="questionText"></h2>
                <button class="answer-btn" id="showAnswer">Показать ответ</button>
                <p id="answerText" style="display: none;"></p>
                <div class="controls">
                    <!-- Buttons for adding points to players will be added here dynamically -->
                </div>
            </div>
        </div>
    </div>

    <script>
        let playerNames = ['Мама', 'Маша', 'Папа', 'Миша'];
        const allCategories = ['Общие знания', 'История России', 'Животный мир', 'Наука и технологии', 'Еда', 'Да или нет?', 'Литература', 'Кино', 'Музыка', 'Спорт', 'География', 'Искусство',                    'Политика', 'Экономика', 'Религия', 'Философия', 'Психология', 'Социология', 'Языки', 'Культура', 'Технологии', 'Природа', 'Космос', 'Медицина', 'Математика', 'Физика', 'Химия', 'Биология', 'Информатика', 'Экология'];
        const defaultCategories = ['Общие знания', 'История России', 'Животный мир', 'Наука и технологии', 'Еда', 'Да или нет?'];
        const defaultSettings = {
            categories: defaultCategories,
            playerNames: playerNames
        };

        function resetToDefaults() {
            gameData.categories = defaultCategories.slice(); // Create a copy of defaultCategories
            
            // Reset player names
            playerNames.length = 0;  // Clear the existing array
            defaultSettings.playerNames.forEach(name => playerNames.push(name)); 

            localStorage.setItem('jeopardySettings', JSON.stringify(defaultSettings));
            
            // Reset scores
            for (let i = 1; i <= 4; i++) {
                scores[`player${i}`] = 0;
            }

            updateScoreboard();          
            createGameBoard();
            currentPlayer = 0; // Reset current player before updating the display
            updateCurrentPlayer(); 
            closeSettings();
        }

        let scores = {
            player1: 0,
            player2: 0,
            player3: 0,
            player4: 0
        };

        let gameData = {
  "questions": {
    "Общие знания": {
      "100": [
        {
          "q": "Какой континент одновременно находится во всех четырех полушариях?",
          "a": "Африка"
        },
        {
          "q": "Какая самая длинная река в мире?",
          "a": "Амазонка"
        },
        {
          "q": "Сколько континентов на Земле?",
          "a": "7"
        },
        {
          "q": "Какой континент пересекают экватор и нулевой меридиан?",
          "a": "Африка"
        },
        {
          "q": "Какое животное является самым быстрым наземным млекопитающим?",
          "a": "Гепард"
        },
        {
          "q": "Какая планета имеет кольца?",
          "a": "Сатурн"
        },
        {
          "q": "Какой элемент периодической таблицы является основой всего живого?",
          "a": "Углерод"
        },
        {
          "q": "Что такое столица Франции?",
          "a": "Париж"
        },
        {
          "q": "Сколько планет в Солнечной системе?",
          "a": "8"
        },
        {
          "q": "Назовите самую большую пустыню мира.",
          "a": "Антарктида"
        },
        {
          "q": "Сколько букв в русском алфавите?",
          "a": "33"
        },
        {
          "q": "В каком океане находится Бермудский треугольник?",
          "a": "Атлантический"
        },
        {
          "q": "Назовите самую большую пустыню мира.",
          "a": "Антарктида"
        },
        {
          "q": "Сколько букв в русском алфавите?",
          "a": "33"
        },
        {
          "q": "В каком океане находится Бермудский треугольник?",
          "a": "Атлантический"
        },
        {
          "q": "Какой океан самый большой по площади?",
          "a": "Тихий"
        },
        {
          "q": "Какая страна является родиной пирамид?",
          "a": "Египет"
        },
        {
          "q": "Какое животное символ Австралии?",
          "a": "Кенгуру"
        }
      ],
      "200": [
        {
          "q": "Какой химический элемент самый распространенный во Вселенной?",
          "a": "Водород"
        },
        {
          "q": "Кто написал \"Войну и мир\"?",
          "a": "Лев Толстой"
        },
        {
          "q": "В каком году началась Первая мировая война?",
          "a": "1914"
        },
        {
          "q": "Какой элемент периодической таблицы является основой органических веществ?",
          "a": "Углерод"
        },
        {
          "q": "Какое самое глубокое озеро в мире?",
          "a": "Байкал"
        },
        {
          "q": "Как называется самая высокая гора в мире?",
          "a": "Джомолунгма"
        },
        {
          "q": "Какой континент самый большой по площади?",
          "a": "Евразия"
        },
        {
          "q": "Кто написал \"Преступление и наказание\"?",
          "a": "Ф.М. Достоевский"
        },
        {
          "q": "Какая планета известна как Красная?",
          "a": "Марс"
        },
        {
          "q": "Кто написал \"Ромео и Джульетту\"?",
          "a": "Уильям Шекспир"
        },
        {
          "q": "Какой химический элемент обозначается символом Fe?",
          "a": "Железо"
        },
        {
          "q": "Какое животное изображено на гербе Канады?",
          "a": "Кленовый лист"
        },
        {
          "q": "Кто написал \"Ромео и Джульетту\"?",
          "a": "Уильям Шекспир"
        },
        {
          "q": "Какой химический элемент обозначается символом Fe?",
          "a": "Железо"
        },
        {
          "q": "Какое животное изображено на гербе Канады?",
          "a": "Кленовый лист"
        },
        {
          "q": "В каком году закончилась Вторая мировая война?",
          "a": "1945"
        },
        {
          "q": "Кто написал \"Гамлета\"?",
          "a": "Уильям Шекспир"
        },
        {
          "q": "Какая самая высокая гора в Северной Америке?",
          "a": "Денали"
        }
      ],
      "300": [
        {
          "q": "Что общего у швейцарского сыра, пчелиных сот и пузырьковой камеры?",
          "a": "Структура, близкая к минимальной поверхности Вейра-Фелана"
        },
        {
          "q": "Кто открыл закон всемирного тяготения?",
          "a": "Исаак Ньютон"
        },
        {
          "q": "Какая столица Франции?",
          "a": "Париж"
        },
        {
          "q": "Что объединяет такие явления, как дождь, снег и град?",
          "a": "Осадки"
        },
        {
          "q": "Какой орган отвечает за обработку информации в организме?",
          "a": "Головной мозг"
        },
        {
          "q": "Какой элемент является основой ДНК?",
          "a": "Фосфор"
        },
        {
          "q": "Что объединяет между собой кит, дельфин и акула?",
          "a": "Животные"
        },
        {
          "q": "Кто является автором \"Войны и мира\"?",
          "a": "Лев Толстой"
        },
        {
          "q": "Какая страна считается родиной футбола?",
          "a": "Великобритания"
        },
        {
          "q": "В каком году закончилась Вторая мировая война?",
          "a": "1945"
        },
        {
          "q": "Какая планета известна своими кольцами из льда и пыли?",
          "a": "Сатурн"
        },
        {
          "q": "Назовите столицу Австралии.",
          "a": "Канберра"
        },
        {
          "q": "В каком году закончилась Вторая мировая война?",
          "a": "1945"
        },
        {
          "q": "Какая планета известна своими кольцами из льда и пыли?",
          "a": "Сатурн"
        },
        {
          "q": "Назовите столицу Австралии.",
          "a": "Канберра"
        },
        {
          "q": "Что такое фотосинтез?",
          "a": "Процесс образования органических веществ из углекислого газа и воды под действием солнечного света"
        },
        {
          "q": "Кто изобрел пенициллин?",
          "a": "Александр Флеминг"
        },
        {
          "q": "Какой химический элемент обозначается символом Au?",
          "a": "Золото"
        }
      ],
      "400": [
        {
          "q": "Какой эффект описывает изменение тона звука при движении источника звука относительно наблюдателя?",
          "a": "Эффект Доплера"
        },
        {
          "q": "Какая самая высокая гора в мире?",
          "a": "Эверест"
        },
        {
          "q": "Сколько камер в сердце человека?",
          "a": "4"
        },
        {
          "q": "Кто изображён на банкноте в 100 долларов США?",
          "a": "Джордж Вашингтон"
        },
        {
          "q": "В какой стране расположены Афинские древние руины?",
          "a": "Греция"
        },
        {
          "q": "Какая система помогает нашему организму поддерживать гомеостаз?",
          "a": "Нервная система"
        },
        {
          "q": "Что такое ДНК?",
          "a": "Молекула, содержащая генетическую информацию"
        },
        {
          "q": "Кто открыл закон всемирного тяготения?",
          "a": "Исаак Ньютон"
        },
        {
          "q": "Какая река протекает через Москву?",
          "a": "Москва-река"
        },
        {
          "q": "Кто изобрел телеграф?",
          "a": "Самуэль Морзе"
        },
        {
          "q": "Какая наука изучает звёзды и планеты?",
          "a": "Астрономия"
        },
        {
          "q": "Назовите самую высокую гору в Европе.",
          "a": "Эльбрус"
        },
        {
          "q": "Кто изобрел телеграф?",
          "a": "Самуэль Морзе"
        },
        {
          "q": "Какая наука изучает звёзды и планеты?",
          "a": "Астрономия"
        },
        {
          "q": "Назовите самую высокую гору в Европе.",
          "a": "Эльбрус"
        },
        {
          "q": "Какая планета известна как утренняя или вечерняя звезда?",
          "a": "Венера"
        },
        {
          "q": "Кто написал \"Мастер и Маргарита\"?",
          "a": "Михаил Булгаков"
        },
        {
          "q": "Что такое гравитация?",
          "a": "Сила притяжения между объектами, обладающими массой"
        }
      ],
      "500": [
        {
          "q": "Какая система счисления используется в большинстве современных компьютеров?",
          "a": "Двоичная"
        },
        {
          "q": "Кто изобрел телефон?",
          "a": "Александр Белл"
        },
        {
          "q": "В каком году была основана компания Google?",
          "a": "1998"
        },
        {
          "q": "Какой процесс преобразует энергию света в энергию химических связей в растениях?",
          "a": "Фотосинтез"
        },
        {
          "q": "Как называется процесс, при котором вода превращается в пар?",
          "a": "Испарение"
        },
        {
          "q": "Что является основой современной биологии и медицины?",
          "a": "Клеточная теория"
        },
        {
          "q": "Что такое глобальное потепление?",
          "a": "Увеличение средней температуры Земли"
        },
        {
          "q": "Как называется метод решения задач, основанный на разбиении их на более мелкие подзадачи?",
          "a": "Декомпозиция"
        },
        {
          "q": "Какая наука изучает строение и функции живых организмов?",
          "a": "Биология"
        },
        {
          "q": "Кто написал \"Дон Кихота\"?",
          "a": "Мигель де Сервантес"
        },
        {
          "q": "Что такое фотосинтез?",
          "a": "Процесс образования органических веществ из углекислого газа и воды с использованием энергии света"
        },
        {
          "q": "В каком году человек впервые ступил на Луну?",
          "a": "1969"
        },
        {
          "q": "Кто написал \"Дон Кихота\"?",
          "a": "Мигель де Сервантес"
        },
        {
          "q": "Что такое фотосинтез?",
          "a": "Процесс образования органических веществ из углекислого газа и воды с использованием энергии света"
        },
        {
          "q": "В каком году человек впервые ступил на Луну?",
          "a": "1969"
        },
        {
          "q": "Какой ученый разработал теорию эволюции?",
          "a": "Чарльз Дарвин"
        },
        {
          "q": "Что такое глобализация?",
          "a": "Процесс интеграции стран и народов в мировую экономику и культуру"
        },
        {
          "q": "В каком году произошла Октябрьская революция?",
          "a": "1917"
        }
      ]
    },
    "История России": {
      "100": [
        {
          "q": "Какой русский город называют \"окном в Европу\"?",
          "a": "Санкт-Петербург"
        },
        {
          "q": "Кто основал Москву?",
          "a": "Юрий Долгорукий"
        },
        {
          "q": "В каком году произошла битва на Чудском озере?",
          "a": "1242"
        },
        {
          "q": "В каком году произошло крещение Руси?",
          "a": "988"
        },
        {
          "q": "Кто правил Россией во время наполеоновских войн?",
          "a": "Александр I"
        },
        {
          "q": "Какой русский князь впервые объединил большинство восточных славянских племен?",
          "a": "Владимир Святославич"
        }
      ],
      "200": [
        {
          "q": "В каком веке произошла Куликовская битва?",
          "a": "XIV век (14)"
        },
        {
          "q": "Кто был первым царем всея Руси?",
          "a": "Иван IV Грозный"
        },
        {
          "q": "В каком году произошла Бородинская битва?",
          "a": "1812"
        },
        {
          "q": "В каком городе состоялось подписание Нёштетского мира, завершившего Ливонскую войну?",
          "a": "Ям-Запольский"
        },
        {
          "q": "Кем был Петр I для России?",
          "a": "Императором"
        },
        {
          "q": "В каком веке происходила Смута в России?",
          "a": "XVII век"
        }
      ],
      "300": [
        {
          "q": "Какое событие привело к окончанию крепостного права в России?",
          "a": "Манифест об отмене крепостного права (1861 г.)"
        },
        {
          "q": "Кто был лидером Российской империи во время Первой мировой войны?",
          "a": "Николай II"
        },
        {
          "q": "В каком году был образован СССР?",
          "a": "1922"
        },
        {
          "q": "Какое событие положило начало Октябрьской революции?",
          "a": "Штурм Зимнего дворца"
        },
        {
          "q": "Что такое «столыпинская реформа»?",
          "a": "Аграрная реформа начала XX века"
        },
        {
          "q": "Кто был первым президентом Российской Федерации?",
          "a": "Борис Ельцин"
        }
      ],
      "400": [
        {
          "q": "Кто был лидером большевиков во время Октябрьской революции?",
          "a": "Владимир Ленин"
        },
        {
          "q": "Кто был первым космонавтом?",
          "a": "Юрий Гагарин"
        },
        {
          "q": "В каком году распался СССР?",
          "a": "1991"
        },
        {
          "q": "Какой договор положил конец Первой мировой войне для России?",
          "a": "Брестский мир"
        },
        {
          "q": "В каком году началась Великая Отечественная война?",
          "a": "1941"
        },
        {
          "q": "В каком городе произошла блокада в годы Великой Отечественной войны?",
          "a": "Ленинград"
        }
      ],
      "500": [
        {
          "q": "Какое название носила программа экономических реформ в СССР в конце 1980-х годов?",
          "a": "Перестройка"
        },
        {
          "q": "Кто был первым президентом России?",
          "a": "Борис Ельцин"
        },
        {
          "q": "В каком году была принята Конституция Российской Федерации?",
          "a": "1993"
        },
        {
          "q": "Какие реформы проводил Александр II?",
          "a": "Отмена крепостного права"
        },
        {
          "q": "Кто руководил Советским Союзом после смерти Сталина?",
          "a": "Никита Хрущев"
        },
        {
          "q": "Какое крупное событие произошло в России в 1917 году?",
          "a": "Две революции (Февральская и Октябрьская)"
        }
      ]
    },
    "Животный мир": {
      "100": [
        {
          "q": "Какое животное считается самым быстрым сухопутным млекопитающим?",
          "a": "Гепард"
        },
        {
          "q": "Какое животное самое большое в мире?",
          "a": "Синий кит"
        },
        {
          "q": "Сколько ног у паука?",
          "a": "8"
        }
      ],
      "200": [
        {
          "q": "Какая птица способна имитировать почти любой звук, который слышит?",
          "a": "Лирохвост"
        },
        {
          "q": "Какое животное самое высокое в мире?",
          "a": "Жираф"
        },
        {
          "q": "Какое животное самое ядовитое в мире?",
          "a": "Кубомедуза"
        }
      ],
      "300": [
        {
          "q": "Какое морское животное обладает самой высокой плотностью нейронов в мозге?",
          "a": "Осьминог"
        },
        {
          "q": "Какое животное самое умное?",
          "a": "Шимпанзе"
        },
        {
          "q": "Какое животное самое маленькое в мире?",
          "a": "Свиноносая летучая мышь"
        }
      ],
      "400": [
        {
          "q": "Какой вид животных использует биолюминесценцию для привлечения добычи?",
          "a": "Удильщик"
        },
        {
          "q": "Какое животное самое сильное?",
          "a": "Жук-носорог"
        },
        {
          "q": "Какое животное самое долгоживущее?",
          "a": "Медуза Turritopsis dohrnii"
        }
      ],
      "500": [
        {
          "q": "Какое животное может выживать в самых экстремальных условиях, включая вакуум космоса?",
          "a": "Тихоходка"
        },
        {
          "q": "Какое животное самое медленное?",
          "a": "Ленивец"
        },
        {
          "q": "Какое животное самое опасное для человека?",
          "a": "Комар"
        }
      ]
    },
    "Наука и технологии": {
      "100": [
        {
          "q": "Какой металл является самым распространенным в земной коре?",
          "a": "Алюминий"
        },
        {
          "q": "Что такое H2O?",
          "a": "Вода"
        },
        {
          "q": "В каком году был изобретен первый компьютер?",
          "a": "1946"
        }
      ],
      "200": [
        {
          "q": "Что такое бозон Хиггса?",
          "a": "Элементарная частица, отвечающая за массу других частиц"
        },
        {
          "q": "Кто изобрел лампочку?",
          "a": "Томас Эдисон"
        },
        {
          "q": "Что такое Интернет?",
          "a": "Всемирная система взаимосвязанных компьютерных сетей"
        }
      ],
      "300": [
        {
          "q": "Какой принцип лежит в основе работы лазера?",
          "a": "Вынужденное излучение"
        },
        {
          "q": "Кто изобрел телевидение?",
          "a": "Владимир Зворыкин"
        },
        {
          "q": "Что такое искусственный интеллект?",
          "a": "Раздел информатики, занимающийся разработкой интеллектуальных систем"
        }
      ],
      "400": [
        {
          "q": "Что такое CRISPR-Cas9?",
          "a": "Технология редактирования генов"
        },
        {
          "q": "Кто изобрел автомобиль?",
          "a": "Карл Бенц"
        },
        {
          "q": "Что такое нанотехнологии?",
          "a": "Область науки и техники, занимающаяся изучением и манипулированием материей на атомном и молекулярном уровнях"
        }
      ],
      "500": [
        {
          "q": "Какая технология используется для передачи данных по оптоволоконным кабелям?",
          "a": "Полноевнутреннее отражение"
        },
        {
          "q": "Кто изобрел самолет?",
          "a": "Братья Райт"
        },
        {
          "q": "Что такое квантовый компьютер?",
          "a": "Вычислительное устройство, использующее принципы квантовой механики для выполнения вычислений"
        }
      ]
    },
    "Еда": {
      "100": [
        {
          "q": "Из какой страны родом пицца?",
          "a": "Италия"
        },
        {
          "q": "Какой фрукт называют \"королем фруктов\"?",
          "a": "Манго"
        },
        {
          "q": "Из чего делают хлеб?",
          "a": "Из муки"
        }
      ],
      "200": [
        {
          "q": "Какой основной ингредиент в суши?",
          "a": "Рис"
        },
        {
          "q": "Какой овощ называют \"вторым хлебом\"?",
          "a": "Картофель"
        },
        {
          "q": "Из чего делают сыр?",
          "a": "Из молока"
        }
      ],
      "300": [
        {
          "q": "Из чего делают тофу?",
          "a": "Соевых бобов"
        },
        {
          "q": "Какой напиток называют \"напитком богов\"?",
          "a": "Вино"
        },
        {
          "q": "Из чего делают шоколад?",
          "a": "Из какао-бобов"
        }
      ],
      "400": [
        {
          "q": "Что такое умами?",
          "a": "Пятый основной вкус, обычно описываемый как \"мясной\" или \"умами\""
        },
        {
          "q": "Какой фрукт называют \"райским яблоком\"?",
          "a": "Помидор"
        },
        {
          "q": "Из чего делают пиво?",
          "a": "Из ячменя"
        }
      ],
      "500": [
        {
          "q": "Какой процесс используется для приготовления йогурта?",
          "a": "Бактериальная ферментация"
        },
        {
          "q": "Какой овощ называют \"царицей огорода\"?",
          "a": "Капуста"
        },
        {
          "q": "Из чего делают мороженое?",
          "a": "Из молока, сливок, сахара и других ингредиентов"
        }
      ]
    },
    "Да или нет?": {
      "100": [
        {
          "q": "Солнце больше Земли?",
          "a": "Да"
        },
        {
          "q": "Париж - столица Франции?",
          "a": "Да"
        },
        {
          "q": "Человек может дышать под водой?",
          "a": "Нет"
        }
      ],
      "200": [
        {
          "q": "Эверест - самая высокая гора в Солнечной системе?",
          "a": "Нет"
        },
        {
          "q": "Москва - столица России?",
          "a": "Да"
        },
        {
          "q": "Собака может летать?",
          "a": "Нет"
        }
      ],
      "300": [
        {
          "q": "Звук распространяется быстрее в воде, чем в воздухе?",
          "a": "Да"
        },
        {
          "q": "Лондон - столица Великобритании?",
          "a": "Да"
        },
        {
          "q": "Кошка может видеть в темноте?",
          "a": "Да"
        }
      ],
      "400": [
        {
          "q": "У человека больше костей, чем у акулы?",
          "a": "Да"
        },
        {
          "q": "Берлин - столица Германии?",
          "a": "Да"
        },
        {
          "q": "Змея может слышать?",
          "a": "Нет"
        }
      ],
      "500": [
        {
          "q": "Алмазы сделаны из угля?",
          "a": "Нет"
        },
        {
          "q": "Рим - столица Италии?",
          "a": "Да"
        },
        {
          "q": "Пингвин может летать?",
          "a": "Нет"
        }
      ]
    },
    "Информатика": {
      "100": [
        {
          "q": "Что такое алгоритм?",
          "a": "Последовательность действий для решения задачи"
        },
        {
          "q": "Что такое бит?",
          "a": "Минимальная единица информации"
        },
        {
          "q": "Для чего используется операционная система?",
          "a": "Для управления компьютером"
        }
      ],
      "200": [
        {
          "q": "Что такое программа?",
          "a": "Набор инструкций для компьютера"
        },
        {
          "q": "Что такое язык программирования?",
          "a": "Формальный язык для написания программ"
        },
        {
          "q": "Что такое компьютерная сеть?",
          "a": "Совокупность компьютеров, объединенных для обмена данными"
        }
      ],
      "300": [
        {
          "q": "Что такое Интернет?",
          "a": "Глобальная компьютерная сеть"
        },
        {
          "q": "Что такое веб-браузер?",
          "a": "Программа для просмотра веб-страниц"
        },
        {
          "q": "Что такое поисковая система?",
          "a": "Программа для поиска информации в интернете"
        }
      ],
      "400": [
        {
          "q": "Что такое кибербезопасность?",
          "a": "Защита компьютерных систем от угроз"
        },
        {
          "q": "Что такое вирус?",
          "a": "Вредная программа, которая может повредить компьютер"
        },
        {
          "q": "Что такое файловая система?",
          "a": "Система организации файлов на диске"
        }
      ],
      "500": [
        {
          "q": "Что такое база данных?",
          "a": "Организованное хранилище информации"
        },
        {
          "q": "Что такое машинное обучение?",
          "a": "Способность компьютера обучаться на данных без явного программирования"
        },
        {
          "q": "Что такое искусственный интеллект?",
          "a": "Раздел информатики, изучающий создание интеллектуальных машин"
        }
      ]
    }
  },
  "categories": [
    "Общие знания",
    "История России",
    "Животный мир",
    "Наука и технологии",
    "Еда",
    "Да или нет?",
    "Литература",
    "Кино",
    "Музыка",
    "Спорт",
    "География",
    "Искусство",
    "Политика",
    "Экономика",
    "Религия",
    "Философия",
    "Психология",
    "Социология",
    "Языки",
    "Культура",
    "Технологии",
    "Природа",
    "Космос",
    "Медицина",
    "Математика",
    "Физика",
    "Химия",
    "Биология",
    "Информатика",
    "Экология"
  ]
};

        let currentQuestionValue = 0;
        let currentPlayer = 0;

        function loadSettings() {
            let savedSettings = localStorage.getItem('jeopardySettings');
            if (savedSettings) {
                savedSettings = JSON.parse(savedSettings);
                gameData.categories = savedSettings.categories;
                if (savedSettings.playerNames && Array.isArray(savedSettings.playerNames)) {
                    playerNames = savedSettings.playerNames; 
                } else {
                    playerNames = defaultSettings.playerNames; // Fallback to defaults if player names are invalid
                }
            }
            updateScoreboard(); 
            createGameBoard();
            updateCurrentPlayer();
        }

        function saveSettings() {
            const numPlayers = Math.max(2, Math.min(5, parseInt(document.getElementById('numPlayers').value)));
            playerNames = [];

            for (let i = 1; i <= numPlayers; i++) {
                const playerNameInput = document.getElementById(`playerName${i}`);
                playerNames.push(playerNameInput ? playerNameInput.value : `Игрок ${i}`);
            }

            gameData.categories = [];
            for (let i = 1; i <= 6; i++) {
                const categorySelect = document.getElementById(`category${i}`);
                gameData.categories.push(categorySelect ? categorySelect.value : `Раздел ${i}`);
            }

            localStorage.setItem('jeopardySettings', JSON.stringify({
                categories: gameData.categories,
                playerNames: playerNames
            }));

            updateScoreboard();
            createGameBoard();
            closeSettings();
        }

        function updateScoreboard() {
            const scoreboard = document.querySelector('.score-board');
            scoreboard.innerHTML = ''; // Clear existing scoreboard

            for (let i = 0; i < playerNames.length; i++) {
                const playerScoreDiv = document.createElement('div');
                playerScoreDiv.className = 'player-score';
                playerScoreDiv.id = `player${i + 1}`; 
                playerScoreDiv.innerHTML = `<h3>${playerNames[i]}</h3><p id="score${i + 1}">0</p>`;
                scoreboard.appendChild(playerScoreDiv);
            }
        }

        function openSettings() {
            const settingsModal = document.getElementById('settingsModal');
            settingsModal.style.display = 'block';

            // Populate settings inputs with current values
            document.getElementById('numPlayers').value = playerNames.length;

            // Create player name inputs
            const playerNamesDiv = document.getElementById('playerNames');
            playerNamesDiv.innerHTML = '';
            for (let i = 1; i <= playerNames.length; i++) {
                playerNamesDiv.innerHTML += `<label for="playerName${i}">Имя игрока ${i}:</label><input type="text" id="playerName${i}" value="${playerNames[i - 1]}"><br>`;
            }

            // Create category inputs
            const categoryInputsDiv = document.getElementById('categoryInputs');
            categoryInputsDiv.innerHTML = '';
            for (let i = 1; i <= 6; i++) {
                let options = '';
                allCategories.forEach(cat => {
                    options += `<option value="${cat}" ${gameData.categories[i - 1] === cat ? 'selected' : ''}>${cat}</option>`;
                });

                categoryInputsDiv.innerHTML += `
                    <label for="category${i}">Раздел ${i}:</label>
                    <select id="category${i}">
                        <option value="random" ${gameData.categories[i - 1] === 'random' ? 'selected' : ''}>Случайная категория</option>
                        ${options}
                    </select><br>
                `;
            }
        }

        function closeSettings() {
            document.getElementById('settingsModal').style.display = 'none';
        }

        document.getElementById('settingsBtn').addEventListener('click', openSettings);

        function createGameBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';

            const selectedCategories = new Set();
            const savedCategories = gameData.categories;

            for (let i = 0; i < savedCategories.length; i++) {
                if (savedCategories[i] === 'random') {
                    while (true) {
                        const randomIndex = Math.floor(Math.random() * allCategories.length);
                        const randomCategory = allCategories[randomIndex];
                        if (!selectedCategories.has(randomCategory)) {
                            selectedCategories.add(randomCategory);
                            break;
                        }
                    }
                } else {
                    selectedCategories.add(savedCategories[i]);
                }
            }

            selectedCategories.forEach(category => {
                const categoryHeader = document.createElement('div');
                categoryHeader.className = 'category';
                categoryHeader.textContent = category;
                board.appendChild(categoryHeader);
            });

            for (let value = 100; value <= 500; value += 100) {
                selectedCategories.forEach(category => {
                    const cell = document.createElement('div');
                    cell.className = 'question-cell';
                    cell.textContent = value;
                    cell.onclick = () => showQuestion(category, value);
                    board.appendChild(cell);
                });
            }
        }

        function updateCurrentPlayer() {
            currentPlayer = (currentPlayer % playerNames.length) + 1; 
            
            const currentPlayerDisplay = document.getElementById('currentPlayer');
            if (currentPlayerDisplay) {
                currentPlayerDisplay.textContent = `Ход игрока: ${playerNames[currentPlayer - 1]}`;
            }

            // Update active player highlight if the elements exist
            const playerScoreElements = document.querySelectorAll('.player-score');
            playerScoreElements.forEach(el => el.classList.remove('active'));
            const currentPlayerElement = document.getElementById(`player${currentPlayer}`);
            if (currentPlayerElement) currentPlayerElement.classList.add('active');
        }

        function showQuestion(category, value) {
            const cell = event.target;
            if (cell.classList.contains('used')) return;

            currentQuestionValue = value;
            const modal = document.getElementById('questionModal');
            const questionText = document.getElementById('questionText');
            const answerText = document.getElementById('answerText');

            // Dynamically add buttons for adding points
            const controlsDiv = document.querySelector('#questionModal .controls');
            controlsDiv.innerHTML = ''; // Clear existing buttons
            for (let i = 0; i < playerNames.length; i++) {
                const button = document.createElement('button');
                button.className = 'score-btn';
                button.textContent = `${playerNames[i]}: +${value}`;
                button.onclick = () => addPoints(i + 1);
                controlsDiv.appendChild(button);
            }

            // Get questions for the specific category and value
            let questions;
            if (!gameData.questions[category] || !gameData.questions[category][value]) {
                questions = [{ "q": "Вопрос не найден", "a": "Ответ не найден" }];
            } else {
                questions = gameData.questions[category][value];
            }

            // Pick a random question
            const randomIndex = Math.floor(Math.random() * questions.length);
            const randomQuestion = questions[randomIndex];

            questionText.textContent = randomQuestion.q;
            answerText.textContent = randomQuestion.a;
            answerText.style.display = 'none';

            modal.style.display = 'block';
            cell.classList.add('used');
        }

        function addPoints(player) {
            if (player >= 1 && player <= playerNames.length) {
                scores[`player${player}`] = (scores[`player${player}`] || 0) + currentQuestionValue;
                document.getElementById(`score${player}`).textContent = scores[`player${player}`];
                document.getElementById('questionModal').style.display = 'none';
                updateCurrentPlayer();
            } else {
                console.error('Invalid player index:', player);
            }
        }

        // Modal controls
        document.querySelector('.close-btn').onclick = function() {
            document.getElementById('questionModal').style.display = 'none';
            updateCurrentPlayer();
        }

        document.getElementById('showAnswer').onclick = function() {
            document.getElementById('answerText').style.display = 'block';
        }

        // Close settings modal when clicking the close button
        document.querySelector('#settingsModal .close-btn').onclick = function() {
            closeSettings();
        }

        window.onclick = function(event) {
            const modal = document.getElementById('questionModal');
            if (event.target == modal) {
                modal.style.display = 'none';
                updateCurrentPlayer();
            }
        }
    </script>
</body>
</html>